<style>
.card {
    width: 100%;
    height: auto;
    color: beige;
    background-color: #2209095c;
}
.card:hover {
    box-shadow: 0px 0px 1em 3px #796954;
}
.card-img-top {
    width:100%;
    height:100%;
}

.card-text {
    white-space:wrap;
    font-size: smaller;
}

.card-title {
    font-size: medium;
}

.col.info {
    white-space: nowrap;
    padding-left: 5    <div class="col">
      One of three columns
    </div>
    <div class="col">
      One of three columns
    </div>px;
    padding-right 0px;
}
.card-link {
    color: #fac823;
    text-decoration-line: blink;
}
.card-link:hover {
    color: white;
</style>
<!-- Products Index View with Cards -->
<style>
.card {
    width: 100%;
    height: auto;
    color: beige;
    background-color: #714d22;
}
.card-img-top {
    width: 100%;
    height: 100%;
}

.card-text {
    white-space: wrap;
    font-size: smaller;
}

.card-title {
    font-size: medium;
}

.col.info {
    white-space: nowrap;
    padding-left: 5px;
    padding-right: 0px;
}
</style>

<h1>All Products</h1>
<div class="row row-cols-xl-4 row-cols-md-3 row-cols-2 g-3">
  <% @products.each do |product| %>
    <div class="col">
      <div class="card h-100"> <!-- Ensures equal height cards -->
        <%= image_tag product.getimage, class: "card-img-top", alt: "#{product.title} image" %>
        <div class="card-body d-flex flex-column"> <!-- Allows content alignment to the bottom -->
          <h5 class="card-title mb-2">
            <a class="card-link" href="/products/<%= product.id %>">
              <%= product.title %>
            </a>
          </h5>
          <div class="card-text">
            <div class="d-flex justify-content-between mb-3">
              <div>Price: $<%= "%.2f" % product.price %></div>
              <div><%= product.stock %> remaining</div>
            </div>
            <!-- Add to Cart Form -->
            <%= form_with url: cart_items_path, local: true do |form| %>
              <div class="d-flex">
                <%= form.hidden_field :product_id, value: product.id %>
                <%= form.number_field :quantity, value: 1, min: 1, class: 'form-control-sm', style: "width: 60px;" %>
                <%= form.submit "Add to Cart", class: 'btn btn-primary btn-sm ms-2' %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    </div>
  <% end %>
</div>

<script>
  // Ensure the active link is highlighted in the navigation
  var rm = document.querySelector(".active");
  rm.classList.remove("active");
  var add = document.getElementById("productsLink");
  add.classList.add("active");

  const cards=document.querySelectorAll("div.card")
  for (let i=0;i<cards.length;i++) {
    cards[i].addEventListener('click', function(e) {
      cards[i].querySelector('a.card-link').click();
      console.log('click')
    })
  }
</script>
